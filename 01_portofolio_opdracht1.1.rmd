# loading, sorting and visualising data 

```{r setup1, echo=FALSE, warning = FALSE, message = FALSE}
knitr::opts_chunk$set(warning = FALSE, message = FALSE, echo = FALSE)
library(tidyverse) 
library(readxl)
library(here)
library(ggplot2)
library(fs)
library(DT)
```

For both readability and data analysis is it important to keep data tidy. Especially when loading data in, it is important to check if the format is tidy for the data analysis that will be conducted. In this chapter, I will show an example of how I loaded in an excel document, selected the needed data and made the used tables tidy. The excel document contains data from an experiment with C. Elegans. In this experiment, the influence of 3 substances on the growth of C. Elegans is tested. Further more, there is a positive and negative control. The positive control for this experiments is incubated in ethanol, the negative control for this experiment is incubated in s-medium. The raw data is shown in figure \@ref(fig:table1)

```{r table1, fig.cap= "table with raw data"}
datatable(read_excel(here::here("raw/CE.LIQ.FLOW.062_Tidydata.xlsx")), options = list(pageLength = 5)) 
```

based upon the names and values, as shown in figure \@ref(fig:table1), the expected data-types are: 
- Raw-data: numeric
- compNames: character 
- compConcentration: numeric 

In figure \@ref(fig:table1), Only the raw-data is numeric, both the compNames and compConcentrations are character strings. This would suggest that something went wrong during importation of the samples. This is also seen in figure \@ref(fig:graph1), where the data was not sorted based upon the actual size, because it is being read as character and therefor is literaly sorted based upon the characters.

```{r graph1, fig.cap= "graph without changing data type"}
table1D <- read_excel(here("raw/CE.LIQ.FLOW.062_Tidydata.xlsx"))
ggplot(table1D, aes(x=compConcentration, y=RawData, color=compName, shape=expType)) +geom_point() + theme(axis.text.x = element_text(angle = 90))
```

 
When correcting the data type of the compound concentration back to numeric, the graph in figure \@ref(fig:graph2) can be created. 

```{r graph2, fig.cap= "graph with changing data type"}
table1D$compConcentration <- as.numeric(table1D$compConcentration)
ggplot(table1D, aes(x=log10(compConcentration), y=RawData, color=expType)) +geom_point() + theme(axis.text.x = element_text(angle = 90)) + geom_jitter() + labs(title = "effect of compound concentration on amount of living C. elegans", y = "C. elegans count", x = "concentration of compound")
```

In this graph, the data is still rather spread out. This can be corrected for by using the negative control as a scale of 1. This brings the data in the plot relatively closer together, making it easier to compare data of different groups. The graph would than look like this: 

i really dunno how this graph would look, because the negative control has a value of 0, therefor scaling the exsisting data to this does not seem possible. 

## analysing the data: 
 To determine if there is a statistical significant difference between the control groups and the experimental group, the following tests can be conducted on the data set: 

- make a simple dotted plot (already done) and look at how the data is roughly distributed. 
- check if the controls of the experiments have the expected result (positive control is positive, negative control is negative) 
- check if the data of each group is normally distributed (shapiro-wilk)
- compare the experimental group to the (positive) control group with the propper statistical tests. these would include: 
    - Levene's test of equality of error variances
    - 2 sides unpaired t.test 
    
However, as analysis the entire data set is not the goal of this chapter, the further data analysis will not be conducted. 




